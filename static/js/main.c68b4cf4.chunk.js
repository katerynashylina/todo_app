(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r,c=n(11),o=n.n(c),a=(n(16),n(17),n(18),n(5)),i=n(8),s=n(2),u=n.n(s),l=n(4),d=n(3),p=n(1),f=n.n(p),j=n(0),b=n(6),m=n.n(b);!function(e){e.All="all",e.Active="active",e.Completed="completed"}(r||(r={}));var h=function(e){var t=e.selectedFilter,n=e.visibleTodos,c=e.setSelectedFilter,o=e.onClearCompleted,a=e.todos.filter((function(e){return!e.completed})),i=n.some((function(e){return e.completed}));return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("footer",{className:"todoapp__footer",children:[Object(j.jsx)("span",{className:"todo-count",children:"".concat(a.length," items left")}),Object(j.jsxs)("nav",{className:"filter",children:[Object(j.jsx)("a",{href:"#/",className:m()("filter__link",{selected:t===r.All}),onClick:function(){return c(r.All)},children:"All"}),Object(j.jsx)("a",{href:"#/active",className:m()("filter__link",{selected:t===r.Active}),onClick:function(){return c(r.Active)},children:"Active"}),Object(j.jsx)("a",{href:"#/completed",className:m()("filter__link",{selected:t===r.Completed}),onClick:function(){return c(r.Completed)},children:"Completed"})]}),Object(j.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:o,style:{visibility:i?"visible":"hidden"},children:"Clear completed"})]})})},v="https://mate.academy/students-api";function O(e){return new Promise((function(t){setTimeout(t,e)}))}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={method:t};return n&&(r.body=JSON.stringify(n),r.headers={"Content-Type":"application/json; charset=UTF-8"}),O(300).then((function(){return fetch(v+e,r)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var g,k=function(e){return x(e)},T=function(e,t){return x(e,"POST",t)},_=function(e,t){return x(e,"PATCH",t)},y=function(e){return x(e,"DELETE")},N=function(e){return k("/todos?userId=".concat(e))},C=function(e,t){return T("/todos?userId=".concat(e),t)},w=function(e,t){return y("/todos/".concat(t,"?userId=").concat(e))},S=function(e,t){return _("/todos/".concat(e),t)};!function(e){e.NoError="",e.EmptyTitle="Title can't be empty",e.Adding="Unable to add a todo",e.Deleting="Unable to delete a todo",e.Updating="Unable to update a todo"}(g||(g={}));var E=function(e){var t=e.setTodos,n=e.todos,r=e.setError,c=e.isLoading,o=e.handleCompleteAll,a=Object(p.useState)(""),s=Object(d.a)(a,2),f=s[0],b=s[1],h=function(){var e=Object(l.a)(u.a.mark((function e(n){var c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f.trim()){e.next=5;break}return r(g.EmptyTitle),e.abrupt("return");case 5:return c={id:0,userId:9934,title:f.trim(),completed:!1},e.prev=6,e.next=9,C(9934,c);case 9:o=e.sent,t((function(e){return[].concat(Object(i.a)(e),[o])})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),r(g.Adding);case 16:b("");case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),v=n.filter((function(e){return e.completed})).length===n.length;return Object(j.jsxs)("header",{className:"todoapp__header",children:[!!n.length&&Object(j.jsx)("button",{type:"button",className:m()("todoapp__toggle-all",v&&"active"),onClick:o}),Object(j.jsx)("form",{onSubmit:h,children:Object(j.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:f,onChange:function(e){b(e.target.value)},disabled:c})})]})},A=f.a.createContext({onDelete:function(){},updateTodo:function(){},removeLoadingTodo:function(){},addLoadingTodo:function(){},loadingTodos:[],deletingTodoId:null,isLoading:!1,updateTodoOnServer:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),L=function(e){var t=e.todo,n=Object(p.useContext)(A),r=n.onDelete,c=n.updateTodo,o=n.removeLoadingTodo,i=n.addLoadingTodo,s=n.loadingTodos,f=n.deletingTodoId,b=n.isLoading,h=n.updateTodoOnServer,v=t.id,O=t.title,x=t.completed,g=Object(p.useState)(O),k=Object(d.a)(g,2),T=k[0],_=k[1],y=Object(p.useState)(!1),N=Object(d.a)(y,2),C=N[0],w=N[1],E=function(){if(!T.trim())return r(v),void w(!1);T.trim()!==O?(h(v,{title:T}),w(!1)):w(!1)},L=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(t.id),n=Object(a.a)(Object(a.a)({},t),{},{completed:!t.completed}),e.next=5,S(t.id,n);case 5:c(n);case 6:return e.prev=6,o(t.id),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})));return function(){return e.apply(this,arguments)}}(),D=Object(p.useRef)(null);Object(p.useEffect)((function(){D.current&&D.current.focus()}),[]);var F=s.includes(t.id)||f===t.id||b;return Object(j.jsx)("section",{className:"todoapp__main",children:Object(j.jsxs)("div",{onDoubleClick:function(){return w(!0)},className:m()("todo",{completed:t.completed}),children:[Object(j.jsx)("label",{className:"todo__status-label",htmlFor:"todoCheckbox",children:Object(j.jsx)("input",{type:"checkbox",id:"todoCheckbox",className:"todo__status",onChange:L,checked:x})}),C?Object(j.jsx)("form",{onSubmit:E,children:Object(j.jsx)("input",{type:"text",className:"todo__title-field",value:T,onChange:function(e){return _(e.target.value)},onBlur:function(){return E()},onKeyUp:function(e){"Escape"===e.key&&(w(!1),_(t.title))},ref:D})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"todo__title",children:O}),Object(j.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return r(v)},children:"\xd7"})]}),Object(j.jsxs)("div",{className:m()("modal overlay",{"is-active":F}),children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]})]})})},D=function(e){var t=e.todos;return Object(j.jsx)("div",{children:t.map((function(e){return Object(j.jsx)(L,{todo:e},e.id)}))})},F=function(e){var t=e.message,n=Object(p.useState)(!1),r=Object(d.a)(n,2),c=r[0],o=r[1];Object(p.useEffect)((function(){o(!0);var e=setTimeout((function(){o(!1)}),3e3);return function(){clearTimeout(e)}}),[t]);return Object(j.jsx)(j.Fragment,{children:c&&Object(j.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(j.jsx)("button",{type:"button",className:"delete",onClick:function(){o(!1)}}),t]})})},U=(n(21),function(){return Object(j.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(j.jsx)("div",{className:"Loader__content"})})}),I=9934,P=function(){var e=Object(p.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(p.useState)(r.All),s=Object(d.a)(o,2),f=s[0],b=s[1],m=Object(p.useState)(g.NoError),v=Object(d.a)(m,2),O=v[0],x=v[1],k=Object(p.useState)(!1),T=Object(d.a)(k,2),_=T[0],y=T[1],C=Object(p.useState)(!1),L=Object(d.a)(C,2),P=L[0],J=L[1],B=Object(p.useState)([]),G=Object(d.a)(B,2),H=G[0],K=G[1],R=Object(p.useState)(null),W=Object(d.a)(R,2),q=W[0],z=W[1];Object(p.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=c,e.next=4,N(I);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),x(g.Updating);case 11:return e.prev=11,y(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}y(!0),function(){e.apply(this,arguments)}()}),[]);var M=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K((function(e){return[].concat(Object(i.a)(e),[t])})),e.prev=1,e.next=4,S(t,n);case 4:c((function(e){return e.map((function(e){return e.id===t?Object(a.a)(Object(a.a)({},e),n):e}))})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),x(g.Updating),x(g.NoError);case 11:return e.prev=11,K([]),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,7,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t),e.prev=1,e.next=4,w(I,t);case 4:c(n.filter((function(e){return e.id!==t}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),x(g.Deleting);case 10:return e.prev=10,z(null),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),t=n.filter((function(e){return e.completed})).map((function(e){return e.id})),e.prev=2,e.next=5,Promise.all(t.map((function(e){return w(I,e)})));case 5:c(n.filter((function(e){return!e.completed}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),x(g.Deleting);case 11:return e.prev=11,y(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K(n.map((function(e){return e.id}))),t={completed:!P},e.next=5,Promise.all(n.filter((function(e){return!e.completed})).map((function(e){return S(e.id,t)})));case 5:c((function(e){return e.map((function(e){return Object(a.a)(Object(a.a)({},e),t)}))})),J(!P),K([]),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),x(g.Updating),K([]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();var Y=function(e,t){switch(t){case r.Active:return e.filter((function(e){return!e.completed}));case r.Completed:return e.filter((function(e){return e.completed}));default:return e}}(n,f);return Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(j.jsxs)("div",{className:"todoapp__content",children:[Object(j.jsx)(E,{setTodos:c,todos:n,setError:x,isLoading:_,handleCompleteAll:X}),_?Object(j.jsx)(U,{}):Object(j.jsx)(A.Provider,{value:{onDelete:Q,updateTodo:function(e){var t=n.map((function(t){return t.id===e.id?Object(a.a)(Object(a.a)({},t),e):t}));c(t)},removeLoadingTodo:function(e){K((function(t){return t.filter((function(t){return t!==e}))}))},addLoadingTodo:function(e){K((function(t){return[].concat(Object(i.a)(t),[e])}))},loadingTodos:H,deletingTodoId:q,isLoading:_,updateTodoOnServer:M},children:Object(j.jsx)(D,{todos:Y})}),!!n.length&&Object(j.jsx)(h,{visibleTodos:Y,selectedFilter:f,setSelectedFilter:b,onClearCompleted:V,todos:n})]}),O&&Object(j.jsx)(F,{message:O})]})};o.a.render(Object(j.jsx)(P,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.c68b4cf4.chunk.js.map